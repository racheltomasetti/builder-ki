INSERT INTO cycle_periods (user_id, start_date, end_date)
VALUES
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2025-09-24', '2025-10-18'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2025-08-29', '2025-09-23'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2025-08-07', '2025-08-28'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2025-07-13', '2025-08-06'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2025-06-21', '2025-07-12'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2025-05-27', '2025-06-20'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2025-04-28', '2025-05-26'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2025-04-05', '2025-04-27'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2025-03-13', '2025-04-04'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2025-01-26', '2025-03-12'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2025-01-04', '2025-01-25'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2024-12-13', '2025-01-03'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2024-11-07', '2024-12-12'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2024-10-14', '2024-11-06'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2024-09-18', '2024-10-13'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2024-08-28', '2024-09-17'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2024-08-07', '2024-08-27'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2024-07-15', '2024-08-06'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2024-06-24', '2024-07-14'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2024-05-29', '2024-06-23'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2024-05-07', '2024-05-28'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2024-04-15', '2024-05-06'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2024-03-21', '2024-04-14'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2024-02-23', '2024-03-20'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2024-02-03', '2024-02-22'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2024-01-12', '2024-02-02'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2023-12-20', '2024-01-11'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2023-11-24', '2023-12-19'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2023-10-31', '2023-11-23'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2023-10-09', '2023-10-30'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2023-09-15', '2023-10-08'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2023-08-24', '2023-09-14'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2023-07-31', '2023-08-23'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2023-06-28', '2023-07-30'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2023-05-21', '2023-06-27'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2023-04-27', '2023-05-20'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2023-04-01', '2023-04-26'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2023-03-08', '2023-03-31'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2023-02-11', '2023-03-07'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2023-01-04', '2023-02-10'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2022-12-12', '2023-01-03'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2022-11-17', '2022-12-11'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2022-10-26', '2022-11-16'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2022-10-07', '2022-10-25'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2022-09-14', '2022-10-06'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2022-08-11', '2022-09-13'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2022-07-16', '2022-08-10'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2022-06-19', '2022-07-15'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2022-05-28', '2022-06-18'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2022-05-05', '2022-05-27'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2022-04-14', '2022-05-04'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2022-03-25', '2022-04-13'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2022-02-23', '2022-03-24'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2022-01-25', '2022-02-22'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2022-01-06', '2022-01-24'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2021-12-11', '2022-01-05'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2021-11-17', '2021-12-10'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2021-10-25', '2021-11-16'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2021-10-04', '2021-10-24'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2021-09-13', '2021-10-03'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2021-08-23', '2021-09-12'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2021-07-25', '2021-08-22'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2021-07-06', '2021-07-24'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2021-06-18', '2021-07-05'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2021-05-24', '2021-06-17'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2021-05-01', '2021-05-23'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2021-04-06', '2021-04-30'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2021-03-10', '2021-04-05'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2021-02-16', '2021-03-09'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2021-01-22', '2021-02-15'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2020-12-31', '2021-01-21'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2020-12-09', '2020-12-30'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2020-11-14', '2020-12-08'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2020-10-20', '2020-11-13'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2020-09-24', '2020-10-19'),
  ('5dbf2739-947c-424f-a649-fd4c3fd72692', '2020-09-02', '2020-09-23');

-- Now backfill all existing captures with cycle info
-- This forces the trigger to run on all captures that have a log_date
UPDATE captures
SET cycle_day = cycle_day
WHERE log_date IS NOT NULL
  AND user_id = '5dbf2739-947c-424f-a649-fd4c3fd72692';

-- Verify the results
SELECT
  COUNT(*) as total_captures_with_cycle_data,
  COUNT(DISTINCT cycle_phase) as distinct_phases
FROM captures
WHERE user_id = '5dbf2739-947c-424f-a649-fd4c3fd72692'
  AND cycle_day IS NOT NULL;

-- Show a sample of captures with cycle info
SELECT
  log_date,
  cycle_day,
  cycle_phase,
  note_type,
  created_at
FROM captures
WHERE user_id = '5dbf2739-947c-424f-a649-fd4c3fd72692'
  AND cycle_day IS NOT NULL
ORDER BY log_date DESC
LIMIT 10;
